<div class="container pt-3">
  <div class="row">
    <div class="col-12">
      <h3 class="color-primary">
        فهرست پست ها
      </h3>
    </div>
  </div>
  <div class="row justify-content-center">
    <div class="col-md-10">

      <mat-card class="p-4 rounded-2xl shadow-md mobile-horizontal-scroll">

        <div class="row" [hidden]="!dataSource.data?.length">
          <div class="col-10">
            <mat-form-field appearance="outline" class="w-100">
              <mat-icon matPrefix fontSet="material-icons-outlined">search</mat-icon>
              <mat-label>جستجو</mat-label>
              <input matInput (input)="applyFilter($event)">
            </mat-form-field>
          </div>
          <div class="col-2">
            <a href="/admin/blog-posts/new" mat-flat-button color="primary" class="add-new-project-button w-100">
              <mat-icon>add</mat-icon> پست جدید
            </a>
          </div>
        </div>

        <table mat-table [dataSource]="dataSource" class="w-full" [hidden]="!dataSource.data?.length">

          <!-- index -->
          <ng-container matColumnDef="index">
            <th mat-header-cell *matHeaderCellDef>#</th>
            <td mat-cell *matCellDef="let row; let i = index">
              {{ i + 1 }}
            </td>
          </ng-container>

          <!-- image -->
          <ng-container matColumnDef="image">
            <th mat-header-cell *matHeaderCellDef>تصویر</th>
            <td mat-cell *matCellDef="let row">
              <img [src]="row.imageUrl" class="rounded my-3 object-cover border border-1 border-primary" style="max-width:100px;min-width:80px;">
            </td>
          </ng-container>

          <!-- title -->
          <ng-container matColumnDef="title">
            <th mat-header-cell *matHeaderCellDef>عنوان</th>
            <td mat-cell *matCellDef="let row">
              {{ row.title }}
            </td>
          </ng-container>

          <!-- description -->
          <ng-container matColumnDef="description">
            <th mat-header-cell *matHeaderCellDef>توضیحات</th>
            <td mat-cell *matCellDef="let row">
              {{ row.description || '—' }}
            </td>
          </ng-container>

          <!-- options -->
          <ng-container matColumnDef="options">
            <th mat-header-cell *matHeaderCellDef>عملیات</th>
            <td mat-cell *matCellDef="let row">

              <a mat-fab color="primary"
                 href="/admin/blog-posts/edit/{{row.id}}"
                 aria-label="edit" class="profile-option-button" matTooltip="ویرایش پروژه">
                <mat-icon fontSet="material-icons-outlined">settings</mat-icon>
              </a>

              <button mat-fab color="warn" aria-label="delete" class="profile-option-button" matTooltip="حذف پروژه">
                <mat-icon fontSet="material-icons-outlined">delete</mat-icon>
              </button>

            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

        </table>

        <mat-paginator [pageSize]="5" [hidden]="!dataSource.data?.length"></mat-paginator>

        <div class="row justify-content-center" [hidden]="dataSource.data?.length">
          <div class="col-md-10">
            <div class="row justify-content-center">
              <span class="material-symbols-outlined text-muted text-center"
                    style="font-size:235px;">
                database_search
              </span>
            </div>

            <h3 class="text-muted text-center">هیچ مطلبی ایجاد نشده است</h3>
            <p class="text-center">
              برای ایجاد مطلب جدید روی دکمه زیر کلیک کنید
            </p>

            <div class="row justify-content-center">
              <div class="col-md-3">
                <a href="/admin/blog-posts/new" mat-flat-button color="primary" class="add-new-project-button w-100">
                  <mat-icon>add</mat-icon> پست جدید
                </a>
              </div>
            </div>

          </div>
        </div>

      </mat-card>

    </div>
  </div>
</div>
